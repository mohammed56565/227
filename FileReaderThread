package csc227.project;

import java.io.File;                   
import java.util.Scanner;              
import java.util.concurrent.BlockingQueue; 
public class FileReaderThread extends Thread {
    private BlockingQueue<PCB> jobQueue;  
    
    
    public FileReaderThread(BlockingQueue<PCB> jobQueue) {
        this.jobQueue = jobQueue; 
    }
    
    @Override
    public void run() {
       
        try (Scanner s = new Scanner(new File("job.txt"))) {
            
            while (s.hasNextLine()) {
                String line = s.nextLine().trim();  
                if (line.isEmpty()) continue;      
                
                String[] parts = line.split("[:;]");
                if (parts.length < 4) continue;    
                
                int id = Integer.parseInt(parts[0]);       
                int burst = Integer.parseInt(parts[1]);    
                int priority = Integer.parseInt(parts[2]); 
                int mem = Integer.parseInt(parts[3]);     
                
                jobQueue.put(new PCB(id, burst, priority, mem));
            }
        } catch (Exception e) {
 
            System.out.println("File error: " + e.getMessage());
        }
    }
}
